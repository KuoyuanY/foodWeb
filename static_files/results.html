<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <title>Restaurants</title>
  <style>
  h2{
    text-align: center;
    color: #f4511e;
  }
  .pressBtn{
    padding: 15px 25px;
    font-size: 24px;
    text-align: center;
    cursor: pointer;
    outline: none;
    color: #fff;
    background-color: #0099ff;
    border: none;
    border-radius: 15px;
  }
  .pressBtn:hover {background-color: #006bb3}
  .buttons{
    text-align: center;
  }
  </style>
  </head>
  <h2 id="head">
    Find Restaurant!
  </h2>

  <div class="buttons">
    <button class="pressBtn" type="button" id="get">Show Results!</button>
  </div>
  <div align="center">
  <p id="firstName"></p>
  <p id="firstPhone"></p>
  <p id="firstWeb"></p>
  </div>
  <div class="buttons" id="nextResult">
    <button class="pressBtn" type="button">Show next Result!</button>
  </div>
  <script>
  $(document).ready(function(){
  $("#nextResult").hide()
  var to_pass = new Object()

  to_pass.price=localStorage.getItem("price")
  to_pass.radius=localStorage.getItem("radius")

  to_pass.term=localStorage.getItem("term")

  if(localStorage.getItem("has_location")==='true'){
    to_pass.location=localStorage.getItem("location")
  } else{
    to_pass.latitude=localStorage.getItem("latitude")
    to_pass.longtitude=localStorage.getItem("longitude")
  }
  to_pass.location=localStorage.getItem("location")


  $("#get").click(function(event){
    $.get( "https://guarded-fortress-21120.herokuapp.com/request", to_pass, function(data) {
      if(data.total===0){
        $("#first").text("No results found")
      } else {
        $("#firstName").text(`Name: ${data.businesses[0].name}`)
        $("#firstPhone").text(`Phone: ${data.businesses[0].display_phone}`)
        $("#firstWeb").text(`website: ${data.businesses[0].url}`)
        $("#nextResult").show()
      }

      })
    })
})
  </script>
</html>
